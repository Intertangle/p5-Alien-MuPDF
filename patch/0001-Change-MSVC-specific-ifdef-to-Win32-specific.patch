From 9d2d634092dc57149ad01b0cde2b1693f7de65ef Mon Sep 17 00:00:00 2001
From: Zakariyya Mughal <zaki.mughal@gmail.com>
Date: Mon, 25 Dec 2017 02:24:10 -0600
Subject: [PATCH] Change MSVC-specific #ifdef to Win32-specific

This aligns the headers with the rest of the library code. In
particular, this makes the needed `fz_fopen_utf8` and `fz_remove_utf8`
prototypes available.
---
 include/mupdf/fitz/system.h | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/include/mupdf/fitz/system.h b/include/mupdf/fitz/system.h
index 18d75a5c..a3761062 100644
--- a/include/mupdf/fitz/system.h
+++ b/include/mupdf/fitz/system.h
@@ -95,6 +95,8 @@ typedef unsigned __int64 uint64_t;
 #define SEEK_END 2
 #endif
 
+#ifdef _WIN32 /* Microsoft Windows */
+
 #ifdef _MSC_VER /* Microsoft Visual C */
 
 /* MSVC up to VS2012 */
@@ -120,6 +122,8 @@ static __inline int signbit(double x)
 #define isinf(x) (!_finite(x))
 #endif
 
+#endif
+
 #define hypotf _hypotf
 #define atoll _atoi64
 
-- 
2.15.1

